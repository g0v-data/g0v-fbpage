{
    "created_time": "2013-10-24T05:03:02+0000",
    "message": "我在爬菜價網站的時候遇到一點編碼上的問題，有會用 node.js 的人可以幫我嗎？\n\n",
    "story": "Muyueh Lee shared a link to the group: g0v.tw 後勤中心.",
    "id": "387816094628136_529408843802193",
    "link": "http:\/\/stackoverflow.com\/questions\/19557325\/big5-to-utf-8-encoding-while-scraping-website-with-node-request",
    "description": "I am new to Node.js, and I am trying to use the request model to scrap a website, I am having problem with the encoding: the target website is using big5 as encoding, and I wished to turn it to utf-8",
    "name": "Big5 to utf-8 encoding while scraping website with Node-request",
    "picture": "https:\/\/external.xx.fbcdn.net\/safe_image.php?d=AQA5QuuBM5i555L5&w=130&h=130&url=http%3A%2F%2Fcdn.sstatic.net%2Fstackoverflow%2Fimg%2Fapple-touch-icon%402.png%3Fv%3Dfde65a5a78c6&cfs=1&_nc_hash=AQC9Awq5Ii5uvPKu",
    "updated_time": "2013-10-25T04:07:40+0000",
    "caption": "stackoverflow.com",
    "from": {
        "name": "Muyueh Lee",
        "id": "1594217104027518"
    },
    "likes": {
        "summary": {
            "total_count": 3
        }
    },
    "comments": {
        "data": [
            {
                "created_time": "2013-10-24T05:12:54+0000",
                "from": {
                    "name": "Chia-liang Kao",
                    "id": "10155373915470668"
                },
                "message": "nodejs 處理 encoding 超苦，所以我之前寫了一個吃五筒打八萬的 proxy 可以參考看看: https:\/\/github.com\/g0v\/api.ly\/blob\/master\/lisproxy.psgi",
                "id": "529410947135316"
            },
            {
                "created_time": "2013-10-24T05:18:34+0000",
                "from": {
                    "name": "陳柏儒",
                    "id": "2020687477948223"
                },
                "message": "你把這個nodejs專案丟到g0v上我們幫你修改看看？",
                "id": "529411670468577"
            },
            {
                "created_time": "2013-10-24T05:56:46+0000",
                "from": {
                    "name": "Muyueh Lee",
                    "id": "1594217104027518"
                },
                "message": "to Chia-liang Kao 感謝，我本來想說用這一個網站來練習 node.js，解碼真的很痛苦。\n\nto 陳柏儒，這其實已經是我所有的程式碼了，歡迎自由使用。\n\nto 顏永富，感謝，我決定轉戰這一個網站！",
                "id": "529420250467719"
            },
            {
                "created_time": "2013-10-24T05:58:49+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "有用歐 我還把他砍掉了說ORZ",
                "id": "529420413801036"
            },
            {
                "created_time": "2013-10-24T05:59:04+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "http:\/\/scm.sco.gov.tw\/_pg\/sc\/index.asp 補貼",
                "id": "529420443801033"
            },
            {
                "created_time": "2013-10-24T06:00:03+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "身為一個賣菜的小孩 我還蠻想知道這玩意要做啥XD",
                "id": "529420610467683"
            },
            {
                "created_time": "2013-10-24T06:04:06+0000",
                "from": {
                    "name": "Ly Cheng",
                    "id": "10155367657647883"
                },
                "message": "http:\/\/yhsiang.logdown.com\/posts\/2013\/07\/08\/nodejs-big5-utf-8  # 參考看看 ?",
                "id": "529421137134297"
            },
            {
                "created_time": "2013-10-24T06:34:18+0000",
                "from": {
                    "name": "Wen-Chi Cheng",
                    "id": "10156311430844284"
                },
                "message": "可以知道新北市果菜運銷市場最新拍賣行情，不過這個只有一個市場，可以參考農產品交易行情站，這邊有所有拍賣市場的紀錄，還可以追溯比對不同時期或不同市場的差異\nhttp:\/\/amis.afa.gov.tw\/",
                "id": "529426860467058"
            },
            {
                "created_time": "2013-10-24T06:38:33+0000",
                "from": {
                    "name": "Wen-Chi Cheng",
                    "id": "10156311430844284"
                },
                "message": "如果是種菜的小孩，可以用這個來比較趨勢變化，看應該把菜送去哪個市場賣比較好\n如果是賣菜的小孩... 可以拿來作為批菜進貨的參考嗎?",
                "id": "529427570466987"
            },
            {
                "created_time": "2013-10-24T06:44:45+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "菜價跟天氣和到貨量比較有關係 看昨天的價格真的只能參考XD",
                "id": "529428433800234"
            },
            {
                "created_time": "2013-10-24T06:54:39+0000",
                "from": {
                    "name": "Muyueh Lee",
                    "id": "1594217104027518"
                },
                "message": "Ly Cheng，感謝你的程式碼，可是還是不行：（\n\n除了練習抓動態資料，我其實是想要知道菜價的變化到底跟什麼（溫度、雨水、颱風）有關係。\n\n農產品交易行情網原本是我最理想的出發地，後來還有提供台北地區的。不過我發現兩個網站在架構上其實很像(命名規則)，懷疑出自同一個團隊。\n\n我最後決定要硬幹，不管中文菜名了，反正只有要有數字可以對得起來就好了。",
                "id": "529429860466758"
            },
            {
                "created_time": "2013-10-24T06:55:13+0000",
                "from": {
                    "name": "Ian Wu",
                    "id": "10156133119379549"
                },
                "message": "剛好最近在弄這個東西，我用 iconv-lite 來轉",
                "id": "529429917133419"
            },
            {
                "created_time": "2013-10-24T06:55:40+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "表對的到就好XD",
                "id": "529429973800080"
            },
            {
                "created_time": "2013-10-24T06:56:19+0000",
                "from": {
                    "name": "Muyueh Lee",
                    "id": "1594217104027518"
                },
                "message": "真的",
                "id": "529430123800065"
            },
            {
                "created_time": "2013-10-24T06:56:29+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "菜價 跟新聞報導比較有關係 只要電視說有颱風 不管他多遠都會漲 所以可以跟新聞一起分析歐",
                "id": "529430167133394"
            },
            {
                "created_time": "2013-10-24T06:58:11+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "另外南部天氣也會影響大部分地區的菜價 所以連續下雨 你就會發現葉菜類變貴 或是買不到",
                "id": "529430547133356"
            },
            {
                "created_time": "2013-10-24T07:00:50+0000",
                "from": {
                    "name": "Ian Wu",
                    "id": "10156133119379549"
                },
                "message": "var iconv = require('iconv-lite');\nvar request = require('request');\nrequest({ url: 'http:\/\/amis.afa.gov.tw\/v-asp\/v101r.asp',encoding:null}, function(err, response, body) {\n  if (!err && response.statusCode == 200) {\n    var str = iconv.decode(new Buffer(body), \"big5\");\n    console.log(str);\n  }\n});",
                "id": "529430857133325"
            },
            {
                "created_time": "2013-10-24T07:01:43+0000",
                "from": {
                    "name": "Ian Wu",
                    "id": "10156133119379549"
                },
                "message": "這段 code 我 run 出來的結果是這樣<html>\n\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text\/html; charset=big5\">\n<title>v101r<\/title>\n<meta name=\"GENERATOR\" content=\"Microsoft FrontPage 4.0\">\n<meta name=\"Microsoft Theme\" content=\"none, default\">\n<\/head>\n\n<body>\n<p align=\"center\">查無結果!<\/p>\n\n<p align=\"center\"><font color=\"#800080\">請使用瀏覽器工具列中<\/font><em><font\nsize=\"4\" color=\"#000080\">[上一頁]<\/font><\/em><font color=\"#800080\">回到前一輸入條件畫面繼續查詢<\/font><\/p>\n<\/body>\n<\/html>",
                "id": "529430977133313"
            },
            {
                "created_time": "2013-10-24T07:01:54+0000",
                "from": {
                    "name": "Wen-Chi Cheng",
                    "id": "10156311430844284"
                },
                "message": "如果是要探討菜價變化跟甚麼有關係，那就有得玩了，一大堆因素都會影響的\n那個交易行情站的好處是，可以比較在同一時間不同市場的差異，這樣應該可以排除天氣的差異吧?",
                "id": "529430997133311"
            },
            {
                "created_time": "2013-10-24T07:02:16+0000",
                "from": {
                    "name": "Ian Wu",
                    "id": "10156133119379549"
                },
                "message": "有解決你的問題嗎？",
                "id": "529431057133305"
            },
            {
                "created_time": "2013-10-24T07:02:42+0000",
                "from": {
                    "name": "Yen YungFu",
                    "id": "10215468848022822"
                },
                "message": "是看產地的天氣歐",
                "id": "529431103799967"
            },
            {
                "created_time": "2013-10-24T07:13:01+0000",
                "from": {
                    "name": "Wen-Chi Cheng",
                    "id": "10156311430844284"
                },
                "message": "那樣的話，建議去結合氣象局的各種特報(大雨特報、豪雨特報、豪大雨特報、低溫特報、颱風警報等等)，或許可以抓出提早預測漲價的預警時間吧? 反正只要發布警報就會漲，不管有沒有災情都一樣",
                "id": "529432410466503"
            },
            {
                "created_time": "2013-10-24T07:31:50+0000",
                "from": {
                    "name": "Muyueh Lee",
                    "id": "1594217104027518"
                },
                "message": "感謝 Ian Wu，原來要把 encoding 設為 null！我剛剛有想到這一點，可是我一直在用 binary 試，大感謝！你要 po Stackoverflow嗎？我可以幫你加分！",
                "id": "529436540466090"
            },
            {
                "created_time": "2013-10-24T07:47:28+0000",
                "from": {
                    "name": "Ian Wu",
                    "id": "10156133119379549"
                },
                "message": "哈哈～我已經去 po 了～賺點 stackoverflow 的積分~~",
                "id": "529438880465856"
            },
            {
                "created_time": "2013-10-25T04:07:40+0000",
                "from": {
                    "name": "Muyueh Lee",
                    "id": "1594217104027518"
                },
                "message": "昨天菜價的結果，特別感謝 Ian Wu，\n\nhttp:\/\/muyueh.com\/30\/veggieprice\/\n\n資料：https:\/\/github.com\/muyueh\/30",
                "id": "529795673763510"
            }
        ],
        "summary": {
            "total_count": 25
        }
    }
}